{%- assign user = site.github.owner %}

{%- if page.style %}
{%- assign style = page.style %}
{%- else %}
{%- assign style = site.style %}
{%- endif %}

{%- if page.breadcrumbs %}
{%- assign breadcrumbs = page.breadcrumbs %}
{%- else %}
{%- assign breadcrumbs = false %}
{%- endif %}

{%- if site.title %}
{%- assign name = site.title %}
{%- elsif user.name %}
{%- assign name = user.name %}
{%- else %}
{%- assign name = user.login %}
{%- endif %}

{%- if site.user_image %}
{%- assign user_img = site.user_image %}
{%- else %}
{%- assign user_img = user.avatar_url %}
{%- endif %}

{%- if site.metadata == true or site.metadata == false %}
{%- assign metadata = site.metadata %}
{%- else %}
{%- assign metadata = true %}
{%- endif %}

<!doctype html>
<html lang="en" class="min-height-full min-width" data-color-mode="auto" data-light-theme="light"
    data-dark-theme="dark_dimmed">

{%- include header.html %}

<body class="min-height-full">
    {%- if style == 'stacked' %}
    <div class="container-lg p-responsive min-height-full">
        <div class="d-flex flex-justify-end pt-2">
            {%- include toggle.html %}
        </div>
        <div class="text-center py-3 border-bottom">
            {%- include masthead.html metadata=metadata %}
            {%- if site.repo_info %}
            <div class="my-2">
                {% include mini-repo-info-card.html class="Box-row-link" %}
            </div>
            {%- endif %}
            {%- if site.social_media %}
            <div class="my-2">
                {%- include social.html %}
            </div>
            {%- endif %}
        </div>
        {%- if site.nav %}
        <nav class="Header d-flex flex-column flex-md-row flex-justify-center">
            {%- include nav.html %}
        </nav>
        {%- endif %}
        <div class="color-bg-default">
            {%- if breadcrumbs %}
            <div class="p-3">
                {%- include breadcrumbs.html %}
            </div>
            {%- endif %}
            <div class="p-responsive markdown-body ">
            {{ content }}
            </div>
        </div>
    </div>
    {%- elsif style == 'sidebar' %}
    <div class="container-xl d-lg-flex min-height-full">
        <div class="col-lg-4 border-gray-light px-4 py-6 text-center">
            {%- include masthead.html metadata=metadata %}
            {%- if site.repo_info %}
            <div class="my-2">
                {% include mini-repo-info-card.html class="Box-row-link" %}
            </div>
            {%- endif %}
            {%- if site.social_media %}
            <div class="my-2">
                {%- include social.html %}
            </div>
            {%- endif %}
            {%- if site.nav %}
            <nav class="d-flex flex-column Header">
                {%- include nav.html %}
            </nav>
            {%- endif %}
        </div>
        <div class="col-lg-8 border-top border-lg-top-0 px-4 color-bg-default">
            <div class="py-3">
                <div class="d-flex">
                    {%- if breadcrumbs %}
                    {%- include breadcrumbs.html %}
                    {%- endif %}
                    <div class="flex-1">
                    </div>
                    {% include toggle.html %}
                </div>
                <div class="p-responsive markdown-body">
                    {{ content }}
                </div>
            </div>
        </div>
    </div>
    {%- else %}
    <div class="Header">
        <div class="flex-1">
            <div class="d-flex">
                <div class="Header-item">
                    <a href="{{ site.baseurl }}/" class="Header-link f4 d-flex flex-items-center">
                        {% octicon mark-github height:32 %}
                    </a>
                </div>
                <div class="Header-item Header-item--full">{{ name }}</div>
                {%- if site.social_media %}
                <div class="Header-item hide-md hide-sm">
                    {%- include social.html %}
                </div>
                {%- endif %}
                {%- if site.repo_info %}
                <div class="Header-item hide-sm">
                    {% include mini-repo-info-card.html class="Header-link" %}
                </div>
                {% endif %}
                <div class="Header-item mr-3">
                {% include toggle.html %}
                </div>
                <div class="Header-item mr-0">
                    <a href="https://github.com/{{ user.login }}" class="Header-link d-flex flex-items-center">
                        <img class="avatar img-cover" height="32" width="32" alt="{{ name }}"
                            src="{{ user_img | relative_url }}">
                    </a>
                </div>
            </div>
            {%- if site.nav %}
            <div class="d-flex">
                <div class="Header-item">
                    {%- include nav.html %}
                </div>
            </div>
            {%- endif %}
        </div>
    </div>
    <div class="container-lg p-3 color-bg-default flex-1">
        {%- if breadcrumbs %}
        {%- include breadcrumbs.html %}
        {%- endif %}
        <div class="p-responsive markdown-body">
            {{ content }}
        </div>
    </div>
    {%- endif %}

    {%- include footer.html %}
</body>

</html>
